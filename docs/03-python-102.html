<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>3&nbsp; Python 102 ‚Äì Doing Computational Social Science&lt;br&gt;[The **Continuous Development** Edition]{.small}</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./06-web-data-apis.html" rel="next">
<link href="./02-python-101.html" rel="prev">
<link href="./figures/logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="custom.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-setting-up.html"><strong>RESEARCH COMPUTING</strong></a></li><li class="breadcrumb-item"><a href="./03-python-102.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Python 102</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./figures/logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Doing Computational Social Science<br><span class="small">The <strong>Continuous Development</strong> Edition</span></a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/UWNETLAB/dcss_supplementary/tree/master/book/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üè†</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text"><strong>RESEARCH COMPUTING</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-setting-up.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Setting up</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-python-101.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Python 101</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-python-102.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Python 102</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text"><br><strong>OBTAINING DATA</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-web-data-apis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Web data (APIs)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-web-data-scraping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Web data (Scraping)</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./_acknowledgements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Acknowledgements</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./_centrality-formulas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Centrality Formulas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./_courses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Courses and Workshops</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#working-with-pythons-data-structures" id="toc-working-with-pythons-data-structures" class="nav-link active" data-scroll-target="#working-with-pythons-data-structures"><span class="header-section-number">3.1</span> Working with Python‚Äôs Data Structures</a>
  <ul class="collapse">
  <li><a href="#working-with-lists-and-tuples" id="toc-working-with-lists-and-tuples" class="nav-link" data-scroll-target="#working-with-lists-and-tuples"><span class="header-section-number">3.1.1</span> Working with Lists and Tuples</a></li>
  <li><a href="#dictionaries" id="toc-dictionaries" class="nav-link" data-scroll-target="#dictionaries"><span class="header-section-number">3.1.2</span> Dictionaries</a></li>
  </ul></li>
  <li><a href="#custom-functions" id="toc-custom-functions" class="nav-link" data-scroll-target="#custom-functions"><span class="header-section-number">3.2</span> Custom Functions</a>
  <ul class="collapse">
  <li><a href="#writing-custom-functions" id="toc-writing-custom-functions" class="nav-link" data-scroll-target="#writing-custom-functions"><span class="header-section-number">3.2.1</span> Writing Custom Functions</a></li>
  </ul></li>
  <li><a href="#reading-and-writing-files" id="toc-reading-and-writing-files" class="nav-link" data-scroll-target="#reading-and-writing-files"><span class="header-section-number">3.3</span> Reading and Writing Files</a>
  <ul class="collapse">
  <li><a href="#exception-handling-with-file-operations" id="toc-exception-handling-with-file-operations" class="nav-link" data-scroll-target="#exception-handling-with-file-operations"><span class="header-section-number">3.3.1</span> Exception Handling with File Operations</a></li>
  </ul></li>
  <li><a href="#pace-yourself" id="toc-pace-yourself" class="nav-link" data-scroll-target="#pace-yourself"><span class="header-section-number">3.4</span> Pace Yourself</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">3.5</span> Conclusion</a>
  <ul class="collapse">
  <li><a href="#key-points" id="toc-key-points" class="nav-link" data-scroll-target="#key-points"><span class="header-section-number">3.5.1</span> Key Points</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/UWNETLAB/dcss_supplementary/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./01-setting-up.html"><strong>RESEARCH COMPUTING</strong></a></li><li class="breadcrumb-item"><a href="./03-python-102.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Python 102</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Python 102</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Learning Objectives
</div>
</div>
<div class="callout-body-container callout-body">
<p>By the end of this chapter, you should be able to:</p>
<ul>
<li>Understand and perform common operations on Python‚Äôs built-in data structures, including lists, tuples, and dictionaries.</li>
<li>Use for loops and comprehensions to perform operations on items in lists, tuples, and dictionaries.</li>
<li>Use the operators <code>in</code> and <code>not in</code> in control flow.</li>
<li>Articulate what it means for a Python object to be ‚Äòiterable‚Äô.</li>
<li>Design, develop, and use your own custom functions.</li>
<li>Read data from, and write data to, external files.</li>
</ul>
</div>
</div>
<p><br></p>
<p>In this chapter, you‚Äôll learn about Python‚Äôs most common built-in data structures: <strong>lists</strong>, <strong>tuples</strong>, and <strong>dictionaries</strong>. We‚Äôll start by exploring the basic syntax for each of these data structures, followed by some of the most common methods and operations used to manipulate the items they contain. We‚Äôll place a heavy emphasis on understanding how to <strong>iterate</strong> over the items in a data structure using <strong>for loops</strong> and <strong>comprehensions</strong>. Finally, we‚Äôll learn how and why to write our own custom functions and how to work with external files.</p>
<section id="working-with-pythons-data-structures" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="working-with-pythons-data-structures"><span class="header-section-number">3.1</span> Working with Python‚Äôs Data Structures</h2>
<section id="working-with-lists-and-tuples" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="working-with-lists-and-tuples"><span class="header-section-number">3.1.1</span> Working with Lists and Tuples</h3>
<p>In Python, <strong>lists</strong> are ordered collections of <em>any</em> object, such as strings, integers, floats, or even other data structures like lists or dictionaries. The items in a list may be of the same type, but they don‚Äôt have to be. Python lists are very flexible‚Äîyou can mix information of various kinds, add information to the list on the fly, and remove or change any of the information the list contains. This is not always the case in other languages.</p>
<p>The most basic list looks like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>my_list <span class="op">=</span> []</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The above code produces an empty list; it contains no objects. You can also create an empty list by referring directly to the built-in <code>list</code> type:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>my_list <span class="op">=</span> <span class="bu">list</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>All lists begin and end with square brackets <code>[]</code>, and elements are separated by commas. Below, we define two lists containing strings (megacities in one list and their countries in another) and one list containing numbers (city population in 2018). Note that we‚Äôre using <code>_</code> as a thousands separator to make our code more readable. As far as Python is concerned, <code>37_468_000</code> and <code>37468000</code> are identical numbers, but the former is easier to read.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>megacities <span class="op">=</span> [<span class="st">'Tokyo'</span>, <span class="st">'Delhi'</span>, <span class="st">'Shanghai'</span>, <span class="st">'S√£o Paulo'</span>, <span class="st">'Mexico City'</span>, <span class="st">'Cairo'</span>, <span class="st">'Dhaka'</span>, <span class="st">'Mumbai'</span>, <span class="st">'Beijing'</span>, <span class="st">'Osaka'</span>]</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>countries <span class="op">=</span> [<span class="st">'Japan'</span>, <span class="st">'India'</span>, <span class="st">'China'</span>, <span class="st">'Brazil'</span>, <span class="st">'Mexico'</span>, <span class="st">'Egypt'</span>, <span class="st">'Bangladesh'</span>, <span class="st">'India'</span>, <span class="st">'China'</span>, <span class="st">'Japan'</span>]</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>pop2018 <span class="op">=</span> [<span class="dv">37_468_000</span>, <span class="dv">28_514_000</span>, <span class="dv">25_582_000</span>, <span class="dv">21_650_000</span>, <span class="dv">21_581_000</span>, <span class="dv">20_076_000</span>, <span class="dv">19_980_000</span>, <span class="dv">19_618_000</span>, <span class="dv">19_578_000</span>, <span class="dv">19_281_000</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Every item in a list has an <strong>index</strong> based on its position in that list. Indices are integers, and in Python, <strong>indexing starts at 0</strong>, which means that the first item in any list starts at index 0. In the <code>megacities</code> list, the index for <code>'Tokyo'</code> is 0, <code>'Delhi'</code> is 1, <code>'Shanghai'</code> is 2, and so on.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/indexes.png" class="img-fluid figure-img"></p>
<figcaption>Indexing in Python starts at 0, not 1.</figcaption>
</figure>
</div>
<p>We can use the index to select a specific item from a list by typing the name of the list and then the index number inside square brackets:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>megacities[<span class="dv">3</span>]  <span class="co"># Returns 'S√£o Paulo'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can also access individual items by working from the end of the list using negative indices. In this case, <code>-1</code> refers to the last item, <code>-2</code> to the second-last item, and so on:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>countries[<span class="op">-</span><span class="dv">2</span>]  <span class="co"># Returns 'China'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>When we access an individual item from a list, Python returns the item in its expected data type. For example, <code>megacities[3]</code> returns <code>'S√£o Paulo'</code> as a string, and <code>pop2018[3]</code> returns the integer <code>21650000</code>. We can use any methods associated with that particular data type:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>pop2018[<span class="dv">3</span>] <span class="op">*</span> <span class="dv">3</span>  <span class="co"># Multiplies the population by 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>megacities[<span class="dv">3</span>].upper()  <span class="co"># Converts 'S√£o Paulo' to uppercase</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Using square brackets to access an element in a list (or tuple, or dictionary) is called <strong>subscripting</strong>, and it can accept a wider variety of indices than a simple integer. One particularly useful way to subscript an object is to use <strong>slice notation</strong>, where two index positions are separated by a colon:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>megacities[<span class="dv">0</span>:<span class="dv">3</span>]  <span class="co"># Returns the first three cities</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Using a slice to subscript a list returns the item at the first index position and every item up to‚Äîbut not including‚Äîthe second index position. To retrieve the last three entries of our list, you would use:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>countries[<span class="dv">7</span>:<span class="dv">10</span>]  <span class="co"># Returns the last three countries</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can also use slice notation with one integer missing to return all of the items in a list up to‚Äîor starting at‚Äîa particular index position. The following gives us the first three megacities:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>megacities[:<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And this returns the last seven:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>megacities[<span class="op">-</span><span class="dv">7</span>:]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="looping-over-lists" class="level4" data-number="3.1.1.1">
<h4 data-number="3.1.1.1" class="anchored" data-anchor-id="looping-over-lists"><span class="header-section-number">3.1.1.1</span> Looping Over Lists</h4>
<p>Python‚Äôs lists are <strong>iterable</strong> objects, which means that we can <strong>iterate</strong> (or <strong>loop</strong>) over the list‚Äôs elements to execute code for each one. This is commonly done with a <strong>for loop</strong>. Below, we iterate over the list <code>megacities</code> and print each item:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> city <span class="kw">in</span> megacities:</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(city)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This code creates a temporary variable called <code>city</code> that refers to the current element of <code>megacities</code> being iterated over. After the loop completes, <code>city</code> will have referred to each element in the list. The name for this variable should be descriptive and convey information about the elements of the list.</p>
</section>
<section id="modifying-lists" class="level4" data-number="3.1.1.2">
<h4 data-number="3.1.1.2" class="anchored" data-anchor-id="modifying-lists"><span class="header-section-number">3.1.1.2</span> Modifying Lists</h4>
<p>Lists can be changed in a number of ways. We can modify the items in the list like we would other values, such as changing the string <code>'Mexico City'</code> to <code>'Ciudad de M√©xico'</code> using the value‚Äôs index:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>megacities[<span class="dv">4</span>] <span class="op">=</span> <span class="st">'Ciudad de M√©xico'</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(megacities)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We often want to add or remove items from a list. Let‚Äôs add <code>'Karachi'</code> to our three lists using the <code>.append()</code> method:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>megacities.append(<span class="st">'Karachi'</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>countries.append(<span class="st">'Pakistan'</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>pop2018.append(<span class="dv">16_093_786</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(megacities), <span class="bu">len</span>(countries), <span class="bu">len</span>(pop2018))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Our lists now contain 11 items each; our Karachi data was appended to the end of each list.</p>
<p>You‚Äôll use <code>.append()</code> frequently. It‚Äôs a convenient way to dynamically build and modify a list. This book has many examples of creating an empty list that is populated using <code>.append()</code>. Let‚Äôs create a new list that will contain a formatted string for each city:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>city_strings <span class="op">=</span> []</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> city <span class="kw">in</span> megacities:</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    city_string <span class="op">=</span> <span class="ss">f"What's the population of </span><span class="sc">{</span>city<span class="sc">}</span><span class="ss">?"</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    city_strings.append(city_string)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> city_string <span class="kw">in</span> city_strings:</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(city_string)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Removing items is just as straightforward. There are a few ways to do it, but <code>.remove()</code> is one of the more common ones:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>megacities.remove(<span class="st">'Karachi'</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>countries.remove(<span class="st">'Pakistan'</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>pop2018.remove(<span class="dv">16_093_786</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Sometimes we want to change the organization of a list. This usually involves sorting the list in some way (e.g., alphabetically, numerically). Below, we make a copy of <code>megacities</code> and sort it alphabetically. We don‚Äôt want to modify the original list, so we explicitly create a new copy using the <code>.copy()</code> method:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>megacities_copy <span class="op">=</span> megacities.copy()</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>megacities_copy.sort()</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(megacities_copy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that we do not use <code>=</code> when we call <code>.sort()</code>. This method modifies the list in place. Assigning <code>megacities_copy = megacities_copy.sort()</code> will actually set <code>megacities_copy</code> to <code>None</code> because the <code>.sort()</code> method returns <code>None</code>.</p>
<p>If we change the order of items in a list using the <code>.sort()</code> method, the original order is lost. We cannot ‚Äòundo‚Äô the sort unless we keep track of the original order. That‚Äôs why we started by making a copy. To temporarily sort our list without changing the order of items in the original list, use the <code>sorted()</code> function:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>sorted_megacities <span class="op">=</span> <span class="bu">sorted</span>(megacities)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(sorted_megacities)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>When applied to a list of numbers, <code>.sort()</code> will reorder the list from smallest to largest:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>pop_copy <span class="op">=</span> pop2018.copy()</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>pop_copy.sort()</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pop_copy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To sort a list in reverse alphabetical order, or numbers from largest to smallest, use the <code>reverse=True</code> argument:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>pop_copy.sort(reverse<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pop_copy)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>megacities_copy.sort(reverse<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(megacities_copy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The fact that lists are <em>ordered</em> makes them very useful. However, if you change the order of a list, you could easily introduce costly mistakes. For example, if we sorted our <code>pop2018</code> list above without also sorting the <code>megacities</code> and <code>countries</code> lists in the same way, they would become misaligned. We would lose the ability to accurately pair cities with their populations:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'The population of </span><span class="sc">{</span>megacities[<span class="dv">4</span>]<span class="sc">}</span><span class="ss"> in 2018 was </span><span class="sc">{</span>pop2018[<span class="dv">4</span>]<span class="sc">}</span><span class="ss">'</span>)  <span class="co"># Might produce incorrect pairing</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="zipping-and-unzipping-lists" class="level4" data-number="3.1.1.3">
<h4 data-number="3.1.1.3" class="anchored" data-anchor-id="zipping-and-unzipping-lists"><span class="header-section-number">3.1.1.3</span> Zipping and Unzipping Lists</h4>
<p>When you have data spread out over multiple lists, it can be useful to <strong>zip</strong> those lists together so that all the items with an index of 0 are associated with one another, all the items with an index of 1 are associated, and so on. The most straightforward way to do this is to use the <code>zip()</code> function, which is illustrated in <a href="#fig-04_02" class="quarto-xref">Figure&nbsp;<span>3.1</span></a> and the code block below. Clever usage of <code>zip()</code> can accomplish a great deal using very few lines of code.</p>
<div id="fig-04_02" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-04_02-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="figures/zip.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-04_02-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.1: cap
</figcaption>
</figure>
</div>
<div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> paired <span class="kw">in</span> <span class="bu">zip</span>(megacities, countries, pop2018):</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(paired)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The actual object that the <code>zip()</code> function returns is a ‚Äòzip object‚Äô, within which our data is stored as a series of tuples (discussed later). We can convert these zipped tuples to a list of tuples using the <code>list()</code> function:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>zipped_list <span class="op">=</span> <span class="bu">list</span>(<span class="bu">zip</span>(megacities, countries, pop2018))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(zipped_list)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>It‚Äôs also possible to <strong>unzip</strong> a zipped list using the <code>*</code> operator and multiple assignment (also called ‚Äòunpacking‚Äô), which allows us to assign multiple values to multiple variables in a single line:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>city_unzip, country_unzip, pop_unzip <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span>zipped_list)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(city_unzip)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(country_unzip)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(pop_unzip)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="list-comprehensions" class="level4" data-number="3.1.1.4">
<h4 data-number="3.1.1.4" class="anchored" data-anchor-id="list-comprehensions"><span class="header-section-number">3.1.1.4</span> List Comprehensions</h4>
<p>Earlier, we created an empty list and populated it using <code>.append()</code> in a for loop. We can also use <strong>list comprehensions</strong>, which can produce the same result in a single line of code. To demonstrate, let‚Äôs try counting the number of characters in the name of each country in the <code>countries</code> list using a for loop and then with a list comprehension.</p>
<p>Using a for loop:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>len_country_name <span class="op">=</span> []</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> country <span class="kw">in</span> countries:</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    n_chars <span class="op">=</span> <span class="bu">len</span>(country)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    len_country_name.append(n_chars)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(len_country_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Using a list comprehension:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>len_country_name <span class="op">=</span> [<span class="bu">len</span>(country) <span class="cf">for</span> country <span class="kw">in</span> countries]</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(len_country_name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>List comprehensions can be a little strange at first, but they become easier with practice. The key things to remember are that they will always include:</p>
<ol type="1">
<li>The expression itself, applied to each item in the original list.</li>
<li>The temporary variable name for the iterable.</li>
<li>The original iterable, which in this case is the list.</li>
</ol>
<p>Above, the expression was <code>len(country)</code>, <code>country</code> was the temporary variable name, and <code>countries</code> was the original iterable.</p>
<p>We often wish to add conditional logic to our for loops and list comprehensions. Let‚Äôs create a new list of cities with populations greater than 20,500,000 with the help of the <code>zip()</code> function:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>biggest <span class="op">=</span> [[city, population] <span class="cf">for</span> city, population <span class="kw">in</span> <span class="bu">zip</span>(megacities, pop2018) <span class="cf">if</span> population <span class="op">&gt;</span> <span class="dv">20_500_000</span>]</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(biggest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The result‚Äî<code>biggest</code>‚Äîis a list of lists. We can work with nested data structures like this using the same tools we use for flat data structures. For example:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> city <span class="kw">in</span> biggest:</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'The population of </span><span class="sc">{</span>city[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> in 2018 was </span><span class="sc">{</span>city[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>When should you use a for loop and when should you use list comprehension? In many cases, it‚Äôs a matter of personal preference. List comprehensions are more concise while still being readable with some Python experience. However, they become unreadable very quickly if you need to perform a lot of operations on each item or if you have complex conditional logic. In those cases, you should avoid list comprehensions to keep your code readable.</p>
<p>List comprehensions are very popular in Python, so it‚Äôs important to know how to read them. Since for loops and list comprehensions do the same thing in slightly different ways, you should be able to convert one into the other and back again.</p>
</section>
<section id="copying-lists" class="level4" data-number="3.1.1.5">
<h4 data-number="3.1.1.5" class="anchored" data-anchor-id="copying-lists"><span class="header-section-number">3.1.1.5</span> Copying Lists</h4>
<p>Earlier, we copied a list using the <code>.copy()</code> method, which is helpful if we want to preserve our original list. Could we accomplish this using the familiar <code>=</code> operator?</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>countries_copy <span class="op">=</span> countries</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(countries_copy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This approach <em>appears</em> to create a copy of <code>countries</code>. However, when we copy a list using the <code>=</code> operator, we are not creating a new object. Instead, we have created a new variable name that points to the original object in memory. Any modifications made using <code>countries_copy</code> will change the same object in memory referenced by <code>countries</code>. If we append <code>'Karachi'</code> to <code>countries_copy</code> and print <code>countries</code>, we would see <code>'Karachi'</code> in both lists. If we want to preserve the original list and make modifications to the second, this will not do.</p>
<p>Instead, we can use the <code>.copy()</code> method to create a <strong>shallow copy</strong> of the original list or use the <code>copy</code> module to create a <strong>deep copy</strong>. To understand the difference, compare a flat list (e.g., <code>[1, 2, 3]</code>) with a list of lists (e.g., <code>[[1, 2, 3], [4, 5, 6]]</code>). The list of lists is nested; it is <em>deeper</em> than the flat list. If we perform a shallow copy (i.e., <code>.copy()</code>) of the flat list, Python will create a new object that is independent of the original. But if we create a shallow copy of the nested list of lists, Python only makes a new object for the outer list; it‚Äôs only one level deep. The contents of the inner lists <code>[1, 2, 3]</code> and <code>[4, 5, 6]</code> are not copied; they are references to the original lists.</p>
<p>When working with nested data structures, such as lists of lists, we need to use the <code>deepcopy()</code> function from the <code>copy</code> module if we want to create a new object that is fully independent of the original:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> copy</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>nested_list <span class="op">=</span> [[<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]]</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>shallow_copy <span class="op">=</span> nested_list.copy()</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>deep_copy <span class="op">=</span> copy.deepcopy(nested_list)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now, modifications to <code>deep_copy</code> will not affect <code>nested_list</code>, even in the nested elements.</p>
<section id="in-or-not-in" class="level5" data-number="3.1.1.5.1">
<h5 data-number="3.1.1.5.1" class="anchored" data-anchor-id="in-or-not-in"><span class="header-section-number">3.1.1.5.1</span> In or Not In?</h5>
<p>Lists used in research contexts are usually far larger than the examples in this chapter. They may have thousands or even millions of items. To find out if a list contains or does not contain a specific value, rather than manually searching a printed list, we can use the <code>in</code> and <code>not in</code> operators, which will evaluate to <code>True</code> or <code>False</code>:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">'Mexico'</span> <span class="kw">in</span> countries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">'Mexico'</span> <span class="kw">not</span> <span class="kw">in</span> countries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>These operators can be very useful when using conditions. For example:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>to_check <span class="op">=</span> <span class="st">'Toronto'</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> to_check <span class="kw">in</span> megacities:</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>to_check<span class="sc">}</span><span class="ss"> was one of the 10 largest cities in the world in 2018.'</span>)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>to_check<span class="sc">}</span><span class="ss"> was not one of the 10 largest cities in the world in 2018.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="using-enumerate" class="level4" data-number="3.1.1.6">
<h4 data-number="3.1.1.6" class="anchored" data-anchor-id="using-enumerate"><span class="header-section-number">3.1.1.6</span> Using <code>enumerate</code></h4>
<p>In some cases, we want to access both the item and its index position from a list at the same time. We can do this with the <code>enumerate()</code> function. Recall the three lists from the megacity example. Information about each megacity is spread out across three lists, but the indexes are shared across those lists. Below, we enumerate <code>megacities</code>, creating a temporary variable for the index position (<code>i</code>) and each item (<code>city</code>), and iterate over it. We use those values to print the name of the city and then access information about the country and city population using the index position. This works because the items in the lists are ordered and aligned:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, city <span class="kw">in</span> <span class="bu">enumerate</span>(megacities):</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>city<span class="sc">}</span><span class="ss">, </span><span class="sc">{</span>countries[i]<span class="sc">}</span><span class="ss">, has </span><span class="sc">{</span>pop2018[i]<span class="sc">}</span><span class="ss"> residents.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>As previously mentioned, we can include as many lines as we want in the indented code block of a for loop, which can help us avoid unnecessary iteration. If you have to perform multiple operations on items in a list, it‚Äôs best to iterate over the data structure once and perform all the necessary operations rather than iterate over the list multiple times.</p>
</section>
<section id="tuples-when-your-lists-wont-change" class="level4" data-number="3.1.1.7">
<h4 data-number="3.1.1.7" class="anchored" data-anchor-id="tuples-when-your-lists-wont-change"><span class="header-section-number">3.1.1.7</span> Tuples: When Your Lists Won‚Äôt Change</h4>
<p>In Python, every object is either <strong>mutable</strong> or <strong>immutable</strong>. We‚Äôve just shown many ways that lists are mutable: adding and removing items, sorting them, and so on. Any data type in Python that allows you to change something about its composition is mutable. Data types that do <strong>not</strong> permit changes after instantiation are immutable.</p>
<p>Generally speaking, computational social scientists prefer to work with mutable objects such as lists. The flexibility we gain by working with a mutable data type usually outweighs the advantages of working with immutable types‚Äîbut not always. To illustrate the usefulness of immutable types, we‚Äôll introduce the <code>tuple</code>.</p>
<p>A <strong>tuple</strong> is an <strong>ordered</strong>, <strong>immutable</strong> series of objects. You can think of tuples as a special kind of list that can‚Äôt be modified once created. In terms of syntax, values in a tuple are stored inside parentheses <code>()</code> rather than square brackets <code>[]</code>. We can instantiate an empty tuple in a similar fashion to lists:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>my_empty_tuple <span class="op">=</span> ()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Just like with lists, we can instantiate our tuples with pre-loaded values:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>a_useful_tuple <span class="op">=</span> (<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can easily convert between tuples and lists using the <code>tuple()</code> and <code>list()</code> functions, respectively:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(countries))</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>countries_tuple <span class="op">=</span> <span class="bu">tuple</span>(countries)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">type</span>(countries_tuple))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>There are many uses for tuples: if you absolutely must ensure that the order of a series of objects is preserved and unchangeable, use a tuple. To illustrate, let‚Äôs use the list method <code>.sort()</code> to change the order of items in our <code>countries</code> list. Note that we will use the <code>.copy()</code> method to preserve a record of the original order:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>countries_sorted <span class="op">=</span> countries.copy()</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>countries_sorted.sort()</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>countries_sorted</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now, the countries are in alphabetical order. However, the <code>countries_sorted</code> list is out of order with the <code>megacities</code> and <code>pop2018</code> lists. In a large project, accidentally sorting a list that shouldn‚Äôt have been sorted might create serious mismatches in your data. To prevent something like this from happening, consider storing your lists as tuples instead; that way, if you try to use the <code>.sort()</code> method on a tuple, Python will throw an error and prevent unintended changes.</p>
<p>Tuples have a few other advantages over lists:</p>
<ul>
<li><strong>Performance</strong>: Using tuples can speed up your code and reduce memory usage.</li>
<li><strong>Hashability</strong>: Tuples can be used as keys in dictionaries because they are immutable, whereas lists cannot.</li>
</ul>
<p>Finally, even though lists are mutable and tuples are immutable, they have another feature in common: they are both <strong>iterable</strong>. Any of the forms of iteration that can be applied to lists can be applied to tuples, too.</p>
</section>
</section>
<section id="dictionaries" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="dictionaries"><span class="header-section-number">3.1.2</span> Dictionaries</h3>
<p>Another Python data structure that you‚Äôll frequently see and use is the <strong>dictionary</strong>. Unlike lists, dictionaries are designed to connect pieces of related information. Dictionaries offer a flexible approach to storing <strong>key-value pairs</strong>. Each <strong>key</strong> must be an immutable Python object, such as an integer, a float, a string, or a tuple, and there can‚Äôt be duplicate keys. <strong>Values</strong> can be any type of object. We can access values by specifying the relevant key.</p>
<p>Where lists use square brackets <code>[]</code>, and tuples use parentheses <code>()</code>, Python‚Äôs dictionaries wrap key-value pairs in curly braces <code>{}</code>, where the keys and values are separated by a colon <code>:</code>, and each pair is separated by a comma. For example:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>tokyo <span class="op">=</span> {</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'country'</span>: <span class="st">'Japan'</span>,</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'pop2018'</span>: <span class="dv">37_468_000</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tokyo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We can use as many keys as we like when we create a dictionary. To quickly access a list of all the keys in the dictionary, we can use the <code>.keys()</code> method:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tokyo.keys())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To access any given value in a dictionary, we provide the name of the dictionary object followed by the name of the key whose value we want to access inside square brackets and quotes:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>tokyo[<span class="st">'pop2018'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Like lists, but unlike tuples, dictionaries can be modified as we work. We can add a new key-value pair to <code>tokyo</code>‚Äîsay, the population density of the Tokyo Metropolitan Area‚Äîusing the same syntax we learned for referencing a key. Because the key we are referencing doesn‚Äôt exist in the dictionary, Python knows we are creating a new key-value pair:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>tokyo[<span class="st">'density'</span>] <span class="op">=</span> <span class="dv">6_168</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tokyo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We could have also started with an empty dictionary and populated it with key-value pairs:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>delhi <span class="op">=</span> {}</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>delhi[<span class="st">'country'</span>] <span class="op">=</span> <span class="st">'India'</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>delhi[<span class="st">'pop2018'</span>] <span class="op">=</span> <span class="dv">28_514_000</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>delhi[<span class="st">'density'</span>] <span class="op">=</span> <span class="dv">11_312</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(delhi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="nested-data-structures" class="level4" data-number="3.1.2.1">
<h4 data-number="3.1.2.1" class="anchored" data-anchor-id="nested-data-structures"><span class="header-section-number">3.1.2.1</span> Nested Data Structures</h4>
<p>Lists, tuples, and dictionaries can all be nested in a variety of ways, including using dictionaries as items in a list, lists as items in dictionaries, and so on. Working with these nested structures is straightforward. Whatever value you are working with, no matter its position in the nested data structure, you can use the methods appropriate to that type.</p>
<p>If we have a dictionary that has lists as values, we can subscript the values after accessing them with the appropriate key:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>japan <span class="op">=</span> {}</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>japan[<span class="st">'cities'</span>] <span class="op">=</span> [<span class="st">'Tokyo'</span>, <span class="st">'Yokohama'</span>, <span class="st">'Osaka'</span>, <span class="st">'Nagoya'</span>, <span class="st">'Sapporo'</span>, <span class="st">'Kobe'</span>, <span class="st">'Kyoto'</span>, <span class="st">'Fukuoka'</span>, <span class="st">'Kawasaki'</span>, <span class="st">'Saitama'</span>]</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>japan[<span class="st">'populations'</span>] <span class="op">=</span> [<span class="dv">37</span>, <span class="fl">3.7</span>, <span class="fl">2.7</span>, <span class="fl">2.3</span>, <span class="fl">1.9</span>, <span class="fl">1.5</span>, <span class="fl">1.5</span>, <span class="fl">1.5</span>, <span class="fl">1.5</span>, <span class="fl">1.2</span>]</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(japan)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Accessing the fifth city:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>japan[<span class="st">'cities'</span>][<span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="lists-of-dictionaries" class="level4" data-number="3.1.2.2">
<h4 data-number="3.1.2.2" class="anchored" data-anchor-id="lists-of-dictionaries"><span class="header-section-number">3.1.2.2</span> Lists of Dictionaries</h4>
<p>We can also store dictionaries as elements in a list. Earlier we created dictionaries <code>tokyo</code> and <code>delhi</code>. Both contain the same keys: <code>'country'</code>, <code>'pop2018'</code>, and <code>'density'</code>. Adding them to a list is straightforward:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>top_two <span class="op">=</span> [tokyo, delhi]</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> city <span class="kw">in</span> top_two:</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(city)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>While any number of arrangements is possible, things can quickly become complicated the more deeply data structures are nested. If you find yourself building complex nested data structures, take a moment to think about what problem you‚Äôre trying to solve and assess your approach. There is almost certainly a way to approach the problem that is cleaner and simpler, reducing the likelihood of making a difficult-to-detect mistake while also making your code more readable.</p>
</section>
</section>
</section>
<section id="custom-functions" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="custom-functions"><span class="header-section-number">3.2</span> Custom Functions</h2>
<p>So far, we‚Äôve used a few functions that are built into Python, such as <code>print()</code> and <code>len()</code>. In these and other cases, built-in functions take an input, perform some operations, and then return an output. For example, if we pass the <code>len()</code> function a string, it computes the number of characters in that string and returns an integer:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>seoul <span class="op">=</span> <span class="st">'Seoul, South Korea'</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(seoul)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We could have computed the length of that string without using <code>len()</code>, for example:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>length <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> character <span class="kw">in</span> seoul:</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>    length <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(length)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Both chunks of code compute the length of the string stored in <code>seoul</code>, but using <code>len()</code> avoids unnecessary work. We use functions to take advantage of <strong>abstraction</strong>: converting repeated tasks into condensed and easily reusable tools. Modern software is built on decades of abstraction. We don‚Äôt code in binary because we have abstracted that process, moving into higher-level languages. Functions save us time, space, and brainpower. This is what you should aim for when you write your own functions: identify small tasks or problems that you repeat often, and write a function that handles them so you can focus on more important problems.</p>
<p>Imagine a set of operations that we need to apply multiple times, each time with a different input. You start by picking one of those inputs and writing the code that produces the end result you want. Where do you go from here? One option, which I do not recommend, is to copy and paste that code for each of the inputs. Once your code is copied, you change the names of the inputs and outputs so that you get the desired output for each input.</p>
<p>What happens if you discover a problem in the code or decide to improve it? You have to change the relevant parts of your code in multiple places, and each time you risk missing something or making a mistake. To make matters worse, the script is far longer than it needs to be, and the sequence of operations is harder to follow and evaluate.</p>
<p>Instead, we can write our own functions that let us reuse chunks of code. If we discover a problem or something we want to change, then we only have to make the change in one place. When we execute our updated function, it will reliably produce the newly desired output. We can store our functions in a separate script and import them elsewhere, making those scripts and notebooks more concise and easier to understand. And if we use descriptive names for our functions, we can abstract away low-level details to focus on higher-level concepts. This is always a good idea, especially when working on large projects.</p>
<p>Writing our own functions offers several benefits:</p>
<ul>
<li><strong>Reusability</strong>: Don‚Äôt do work that has already been done.</li>
<li><strong>Abstraction</strong>: Abstract away low-level details so you can focus on higher-level concepts and logic.</li>
<li><strong>Error Reduction</strong>: If you find a mistake, you only need to fix it in one place.</li>
<li><strong>Readability</strong>: Shorter and more readable scripts are easier to understand and maintain.</li>
</ul>
<section id="writing-custom-functions" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="writing-custom-functions"><span class="header-section-number">3.2.1</span> Writing Custom Functions</h3>
<p>To <strong>define</strong> a function in Python, you start with the keyword <code>def</code> followed by the name of the function, parentheses containing any arguments the function will take, and then a colon <code>:</code>. All code that is executed when the function is called is contained in an indented block. Below, we define a function called <code>welcome()</code> that accepts a name and prints a greeting:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> welcome(name):</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Hi, </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">! Good to see you.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Calling the function:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>welcome(<span class="st">'Miyoko'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this case, the function prints a new string to the screen. While this can be useful, most of the time we want to actually do something to the input and then <strong>return</strong> a different output. If a function does not explicitly return an output, it will still return <code>None</code>.</p>
<p>Here‚Äôs an example of a function that cleans a string:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clean_string(some_string):</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>    cleaned <span class="op">=</span> some_string.strip().lower()</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> cleaned</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>cleaned_str <span class="op">=</span> clean_string(<span class="st">'   Hi, my name is John McLevey.   '</span>)</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(cleaned_str)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>User-defined functions can be as simple or as complex as we like, although you should strive to design functions that are as simple as possible. The first and most important step is to know what problem you‚Äôre trying to solve. If you understand a problem, you can often break it down into smaller sub-problems, some of which might be repeated many times. Rather than write an enormous block of code that handles everything, you can write several sub-functions that individually handle these smaller problems, letting you better organize your approach.</p>
<p>You can also define functions with default arguments, allowing you to call the function without specifying all parameters every time:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> greet(name, message<span class="op">=</span><span class="st">'Good to see you'</span>):</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Hi, </span><span class="sc">{</span>name<span class="sc">}</span><span class="ss">! </span><span class="sc">{</span>message<span class="sc">}</span><span class="ss">.'</span>)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>greet(<span class="st">'Miyoko'</span>) </span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="co"># or override the default message</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>greet(<span class="st">'Miyoko'</span>, <span class="st">'How have you been'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>There is plenty more that could be said about writing your own functions; however, we‚Äôll set further discussions aside for now. Throughout the rest of this book, we‚Äôll see many examples of custom functions, and you‚Äôll have many opportunities to write and improve your own.</p>
</section>
</section>
<section id="reading-and-writing-files" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="reading-and-writing-files"><span class="header-section-number">3.3</span> Reading and Writing Files</h2>
<p>When working with data, you will routinely find yourself reading from and writing to files on disk. While we‚Äôll delve into specifics like reading CSV files or interacting with databases in later chapters, it‚Äôs important to understand the basics of file I/O (Input/Output) in Python.</p>
<p>To interact with files in Python, you typically need to:</p>
<ol type="1">
<li><strong>Open</strong> the file.</li>
<li><strong>Perform</strong> some operation (read, write, append, etc.).</li>
<li><strong>Close</strong> the file.</li>
</ol>
<p>However, manually opening and closing files can be error-prone if, for example, an exception occurs before you close the file. To handle this gracefully, Python provides the <code>with</code> statement, which ensures that the file is properly closed after its suite finishes, even if an exception is raised.</p>
<p>Here‚Äôs how you can read from a text file using the <code>with</code> statement:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>file_path <span class="op">=</span> Path(<span class="st">'data/some_text_file.txt'</span>)</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> file_path.<span class="bu">open</span>(mode<span class="op">=</span><span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>    text_data <span class="op">=</span> <span class="bu">file</span>.read()</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="bu">len</span>(text_data))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example:</p>
<ul>
<li>We use the <code>pathlib</code> module to handle file paths in an object-oriented way, which is more robust and portable across different operating systems.</li>
<li>The <code>file_path.open()</code> method is used instead of the built-in <code>open()</code> function, which integrates nicely with <code>pathlib</code>.</li>
<li>The <code>with</code> statement ensures that the file is automatically closed after we‚Äôre done with it.</li>
<li>The <code>mode='r'</code> argument specifies that we are opening the file in read mode.</li>
<li>The <code>encoding='utf-8'</code> argument specifies the file encoding, which is important for correctly reading text files, especially those containing non-ASCII characters.</li>
</ul>
<p>To read the file line by line into a list, you can use the <code>.readlines()</code> method:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> file_path.<span class="bu">open</span>(mode<span class="op">=</span><span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>    list_of_lines <span class="op">=</span> <span class="bu">file</span>.readlines()</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="bu">len</span>(list_of_lines))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you want to write data to a file, you can use <code>mode='w'</code> for write mode:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> file_path.<span class="bu">open</span>(mode<span class="op">=</span><span class="st">'w'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">file</span>.write(<span class="st">"Hello, World!"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This will create a new file or overwrite an existing file with the text ‚ÄúHello, World!‚Äù.</p>
<section id="exception-handling-with-file-operations" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="exception-handling-with-file-operations"><span class="header-section-number">3.3.1</span> Exception Handling with File Operations</h3>
<p>When working with files, it‚Äôs good practice to include exception handling to manage potential errors, such as the file not existing or permission issues.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> file_path.<span class="bu">open</span>(mode<span class="op">=</span><span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>) <span class="im">as</span> <span class="bu">file</span>:</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>        text_data <span class="op">=</span> <span class="bu">file</span>.read()</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">FileNotFoundError</span>:</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"The file </span><span class="sc">{</span>file_path<span class="sc">}</span><span class="ss"> does not exist."</span>)</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">IOError</span>:</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"An error occurred while reading the file </span><span class="sc">{</span>file_path<span class="sc">}</span><span class="ss">."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<!-- 
- **TODO**: I am considering adding content like this to the chapter. However, it might be better to introduce it "just in time." Will come back to this.

### Using JSON Files

In computational social science, you might often work with JSON (JavaScript Object Notation) files, which store data in a structured, human-readable format. Python's `json` module makes it easy to read from and write to JSON files.

```python
import json

# Reading JSON data
with open('data/data.json', 'r', encoding='utf-8') as json_file:
    data = json.load(json_file)

# Writing JSON data
with open('data/output.json', 'w', encoding='utf-8') as json_file:
    json.dump(data, json_file, indent=4)
```

### Using CSV Files

Comma-Separated Values (CSV) files are another common data format. Python's `csv` module provides functionality to read from and write to CSV files, although in this book we'll mostly read and write CSV files using a package called Pandas.

```python
import csv

# Reading CSV data
with open('data/data.csv', 'r', encoding='utf-8') as csv_file:
    csv_reader = csv.reader(csv_file)
    for row in csv_reader:
        print(row)

# Writing CSV data
with open('data/output.csv', 'w', newline='', encoding='utf-8') as csv_file:
    csv_writer = csv.writer(csv_file)
    csv_writer.writerow(['Column1', 'Column2', 'Column3'])
    csv_writer.writerow(['Value1', 'Value2', 'Value3'])
```

### Working with Multiple Files

If you need to process multiple files, you can use the `glob` module along with `pathlib` to iterate over files matching a specific pattern.

```python
from pathlib import Path

data_dir = Path('data/')

for file_path in data_dir.glob('*.txt'):
    with file_path.open(mode='r', encoding='utf-8') as file:
        text_data = file.read()
        # Process text_data as needed
```

### Understanding File Paths

Using `pathlib` helps avoid issues with file paths across different operating systems (Windows, macOS, Linux).

```python
from pathlib import Path

# Define a path
data_dir = Path('data/')

# Join paths
file_path = data_dir / 'some_text_file.txt'

# Check if a file exists
if file_path.exists():
    print(f"The file {file_path} exists.")
```

By mastering these file operations, you'll be well-equipped to handle a variety of data sources in your computational social science projects.
 -->
</section>
</section>
<section id="pace-yourself" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="pace-yourself"><span class="header-section-number">3.4</span> Pace Yourself</h2>
<p>There‚Äôs much more to Python than what we‚Äôve covered here, but it‚Äôs important to pace yourself. You don‚Äôt need to learn everything all at once before diving into your research projects. As you progress through the book, we‚Äôll introduce additional Python concepts and techniques relevant to specific research contexts. This just-in-time learning approach allows you to build a solid foundation while acquiring new tools as you need them.</p>
<blockquote class="blockquote">
<p><strong>Further Reading</strong></p>
<p>There is no shortage of excellent resources for learning Python. If you‚Äôre looking for more in-depth material, consider the following:</p>
<ul>
<li><strong>‚ÄúPython for Everybody‚Äù by Charles Severance</strong>: A great starting point for beginners, offering a comprehensive introduction to Python programming.</li>
<li><strong>‚ÄúAutomate the Boring Stuff with Python‚Äù by Al Sweigart</strong>: Focuses on practical programming skills for automating tasks.</li>
<li><strong>‚ÄúThink Python‚Äù by Allen B. Downey</strong>: Offers a deeper dive into Python programming concepts.</li>
</ul>
<p>Remember, the best way to learn programming is by doing. Practice regularly, experiment with code, and don‚Äôt hesitate to revisit concepts that are challenging.</p>
</blockquote>
</section>
<section id="conclusion" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="conclusion"><span class="header-section-number">3.5</span> Conclusion</h2>
<p>In this chapter, we‚Äôve expanded your Python programming skills by exploring essential data structures, functions, and file operations.</p>
<p>You learned about:</p>
<ul>
<li><strong>Lists, Tuples, and Dictionaries</strong>: How to create and manipulate these built-in data structures, including adding, removing, and accessing elements. You also learned about the importance of mutability and immutability in Python objects.</li>
<li><strong>Iteration</strong>: How to loop over items in lists, tuples, and dictionaries using <code>for</code> loops and comprehensions. This included understanding the use of functions like <code>zip()</code>, <code>enumerate()</code>, and list comprehensions to perform efficient data processing.</li>
<li><strong>Custom Functions</strong>: The importance of writing your own functions to promote code reuse, abstraction, and readability. You saw how to define functions using <code>def</code>, pass arguments, and return values.</li>
<li><strong>Reading and Writing Files</strong>: The fundamentals of file I/O in Python, including using the <code>with</code> statement for safe file handling, reading from and writing to text files, and working with common data formats like JSON and CSV.</li>
<li><strong>Best Practices</strong>: Introduced modern practices like using the <code>pathlib</code> module for file path management and the importance of exception handling when working with files.</li>
</ul>
<p>By mastering these concepts, you‚Äôre building a strong foundation for more advanced topics in computational social science. You‚Äôll find that these skills are indispensable as you tackle complex data analysis tasks, work with larger datasets, and develop more sophisticated programs.</p>
<hr>
<section id="key-points" class="level3" data-number="3.5.1">
<h3 data-number="3.5.1" class="anchored" data-anchor-id="key-points"><span class="header-section-number">3.5.1</span> Key Points</h3>
<ul>
<li><strong>Data Structures</strong>: Understanding and using Python‚Äôs built-in data structures‚Äîlists, tuples, and dictionaries‚Äîis crucial for effective data manipulation.</li>
<li><strong>Iteration and Comprehensions</strong>: Leveraging loops and comprehensions allows for efficient processing of iterable objects.</li>
<li><strong>Control Flow Operators</strong>: Using <code>in</code>, <code>not in</code>, and <code>isinstance</code> enhances your ability to write conditional code.</li>
<li><strong>Custom Functions</strong>: Writing your own functions promotes code reuse and better organization.</li>
<li><strong>File Operations</strong>: Mastering file I/O, including reading and writing different file types, is essential for handling data.</li>
<li><strong>Modern Practices</strong>: Employing modules like <code>pathlib</code> and proper exception handling aligns your code with contemporary best practices.</li>
</ul>
<hr>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02-python-101.html" class="pagination-link" aria-label="Python 101">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Python 101</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./06-web-data-apis.html" class="pagination-link" aria-label="Web data (APIs)">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Web data (APIs)</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/UWNETLAB/dcss_supplementary/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>